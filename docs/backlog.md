# Omni-Dev-Fusion Backlog

> **Project progress is determined by feature name only.** Track status by the feature headings below. No phases, no stage numbers—just priorities and feature names.

---

## Legend

| Status        | Meaning                  |
| ------------- | ------------------------ |
| `Todo`        | Not started              |
| `In Progress` | Actively being worked on |
| `Blocked`     | Waiting on dependencies  |
| `Deferred`    | Out of scope for now     |
| `Done`        | Completed                |

---

## High Priority

### Omni-Vector Phase 2 (out-of-scope follow-ups)

Items deferred from [milestone 2026-02 omni-vector](milestones/2026-02-omni-vector-optimization-and-arrow-native.md), now tracked here.

| Task                         | Status | Description                                                                                                                 |
| ---------------------------- | ------ | --------------------------------------------------------------------------------------------------------------------------- |
| **Tantivy Writer reuse**     | Done   | Implemented: KeywordIndex caches `RefCell<Option<IndexWriter>>`, reused across bulk_upsert/upsert_document/index_batch      |
| **simd-json (optional)**     | Done   | Added: writer_impl uses simd_json::serde::from_slice for MetadataExtract/Value, fallback to serde_json on error             |
| **Connection pool**          | Done   | Implemented: `DatasetCache` + LRU eviction, `new_with_cache_options(..., DatasetCacheConfig { max_cached_tables })`; see §2 |
| **Async index build**        | Done   | `create_index_background(table_name)` implemented (spawns index build, returns immediately); see §3                         |
| **Compressed serialization** | Done   | Lance V2_1 storage via `default_write_params()` for Dataset::write and append; see §4                                       |

---

## Medium Priority

### UltraRAG-Style Ingest (Complete Implementation)

Implement full document-ingest pipeline aligned with UltraRAG’s design using **our stack only** (no UltraRAG dependency): full text → single-pass chunking (Rust omni-tokenizer/tiktoken-rs) → source + chunk_index; idempotent write; optional image extraction.

| Task                                     | Status | Description                                                                                                                                                                                                              |
| ---------------------------------------- | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Milestone (completed)**                | Done   | [UltraRAG-Style Ingest — Completed](milestones/ultrarag-style-ingest-completed.md)                                                                                                                                       |
| **Phase 1: Idempotent ingest**           | Done   | `delete_by_metadata_source` in Rust + graph.py delete-then-add                                                                                                                                                           |
| **Phase 2: Rust chunking API**           | Done   | `chunk_text` in omni-tokenizer, `py_chunk_text` in PyO3; Rust chunker is default                                                                                                                                         |
| **Phase 3: Full-doc / image (optional)** | Done   | Documented; PDF page images extracted to disk (opt-in via `ingest_extract_images`). Images are not in vector store or recall—see [milestone](milestones/ultrarag-style-ingest-completed.md#out-of-scope-this-milestone). |
| **Phase 4: Tests & docs**                | Done   | Rust + Python tests; plan and docs updated                                                                                                                                                                               |

---

## Current Focus (Python MCP Path)

The Python MCP server (`omni mcp`) is fully functional. **Rust MCP server replacement (Phase 2–4) is deferred indefinitely.**

**Core goal**: A conversational assistant that users can talk to (e.g. via Telegram). The assistant calls skills/tools and uses the LLM to accomplish complex tasks. Users only need to chat; the assistant does the rest. This is what our reference projects (Nanobot, ZeroClaw) achieve with Telegram integration—our target.

| Task                              | Status      | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| --------------------------------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **E2E validation**                | In Progress | Build + unit tests ✅; manual: gateway + MCP + LLM (see [run-rust-agent.md](how-to/run-rust-agent.md) §E2E).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **Harden tests & docs**           | In Progress | Telegram channel hardening tests added (chunking, polling error handling, markdown fallback, timeout paths), Valkey/session debug observability fields are being expanded, memory persistence is being hardened (atomic state snapshots + startup restore, with Valkey backend mode, strict-by-default startup for Valkey-resolved backends, and explicit opt-out control), auto memory backend selection/no-fallback behavior is now covered by dedicated tests, adaptive memory recall planning (budget/window-aware k1/k2/lambda + bounded context injection) is implemented with dedicated tests and observability events, recency-aware recall score fusion is now implemented with dedicated regression tests, session-level recall feedback adaptation (outcome-driven plan tightening/broadening) is now implemented with dedicated tests and observability events, recall feedback signal resolution now prioritizes explicit user markers and MCP tool execution outcomes before assistant-text heuristic fallback, feedback bias persistence is now shared through session backend key-space for cross-instance recall continuity, `/session memory` runtime diagnostics (dashboard + JSON) are now available for per-session recall inspection including `query_tokens`, `embedding_source`, `pipeline_duration_ms`, and `context_chars_injected`, `/session memory` snapshot storage is now shared via session backend key-space for cross-instance inspection in Valkey deployments, memory embedding config now resolves from the canonical `embedding.*` settings keys (model/dimension/client URL), embedding dimension drift now auto-repairs via vector resampling (`embedding_repaired` source), memory episode store/recall is now session-scoped in Rust (`session_id` scope key) to prevent cross-session contamination, Valkey dedup observability parity now includes accepted/duplicate events (`telegram.dedup.update_accepted`, `telegram.dedup.duplicate_detected`), fault diagnosis matrix + event-chain playbook are documented, automated event-sequence checking is available, command-event/dedup black-box harnesses are now Pythonized (`test_omni_agent_command_events.py`, `test_omni_agent_dedup_events.py`) with wrapper compatibility retained, the event-sequence checker is now Pythonized (`check_omni_agent_event_sequence.py`) with shell compatibility retained, the memory suite harness is now Pythonized (`test_omni_agent_memory_suite.py`) with shell + `just` compatibility retained, and full mode now includes a high-complexity self-evolution DAG black-box stage (dataset: `memory_evolution_complex_scenarios.json`) with JSON/Markdown report outputs, the memory A/B benchmark harness is now Pythonized (`test_omni_agent_memory_benchmark.py`) with scenario dataset and JSON/Markdown report artifacts, the session matrix/concurrency isolation harnesses are now Pythonized (`test_omni_agent_session_matrix.py`, `test_omni_agent_concurrent_sessions.py`) with compatibility wrappers retained, the Valkey live-test suite harness is now Pythonized (`test_omni_agent_valkey_suite.py`) with compatibility wrappers retained for all existing `test-omni-agent-valkey-*.sh` workflows, control-command admin rules now use user-friendly command selectors instead of regex (`/session partition=>owner;/reset,/clear=>ops;session.*=>owner`), Discord channel provider wiring is now integrated in Rust CLI/runtime/settings, and docs are being updated continuously; selector parser boundary tests now cover `cmd:` prefix, `@bot` suffix normalization, and wildcard validation; command-parser integration tests now consume crate-level `omni_agent::test_support` exports instead of `#[path]` source-module compilation; Telegram Markdown renderer now preserves safe fenced-code language identifiers with regression coverage; media-caption MarkdownV2 fenced-code fallback regression coverage is now split across `channels_telegram_media_markdown.rs` (media-group) and `channels_telegram_media_markdown_upload.rs` (local-file upload); Telegram media tests are further modularized into dedicated targets (`channels_telegram_media.rs`, `channels_telegram_media_upload.rs`, `channels_telegram_media_delivery.rs`, `channels_telegram_media_caption.rs`, `channels_telegram_media_caption_fallback.rs`, `channels_telegram_media_markdown.rs`, `channels_telegram_media_markdown_upload.rs`) with shared fixtures in `telegram_media_support/mod.rs`, split helpers (`telegram_media_support/media_api.rs`, `telegram_media_support/upload_api.rs`), focused media API handlers (`telegram_media_support/media_api/routing.rs`, `telegram_media_support/media_api/markdown_fallback.rs`, `telegram_media_support/media_api/server_bootstrap.rs`), focused upload handlers (`telegram_media_support/upload_api/photo.rs`, `telegram_media_support/upload_api/media_group.rs`), upload server bootstrap (`telegram_media_support/upload_api/server_bootstrap.rs`), and shared test server bootstrap helper (`telegram_media_support/bootstrap.rs`); Telegram runtime command dispatch is now modularized into `runtime/jobs/command_router.rs`, `runtime/jobs/command_handlers.rs`, and `runtime/jobs/background_completion.rs` with full `channels::telegram::runtime::tests` regression coverage; runtime tests are further split from `telegram_runtime/mod.rs` into focused modules (`session_resume_flow.rs`, `session_status.rs`, `session_budget.rs`, `session_jobs.rs`, `transport_command_flow.rs`, `partition_modes.rs`) while retaining shared fixtures in `telegram_runtime/mod.rs`; Telegram runtime reply formatting is now decomposed into `runtime/jobs/replies/shared.rs`, `session_context.rs`, `session_memory/mod.rs` (with `session_memory/snapshot.rs`, `session_memory/snapshot/render.rs`, `session_memory/snapshot/not_found.rs`, `session_memory/metrics.rs` + `session_memory/runtime.rs`), `session_partition.rs`, and `session_budget.rs` with `runtime/jobs/replies/mod.rs` as the stable export surface. |
| **Memory CI gate automation**     | In Progress | New CI orchestrator `scripts/channel/test_omni_agent_memory_ci_gate.py` now runs quick/nightly memory gates with managed Valkey + mock Telegram API + local webhook runtime; GitHub workflow `.github/workflows/omni-agent-memory-gates.yaml` executes quick profile on PR and nightly profile on schedule/manual dispatch.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| **Polish experience**             | Todo        | Error messages, startup flow, env/config clarity.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Conversational assistant**      | Todo        | User talks → assistant calls skills + LLM → complex tasks. Study Nanobot/ZeroClaw channel architecture first, then implement (e.g. Telegram).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **Channel Security Baseline**     | In Progress | Webhook secret validation + dedup backend are active; allowlist policy hardening remains ongoing.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| **Telegram Transport Robustness** | In Progress | Unicode-safe chunking, markdown bad-request fallback (including HTTP 200 + `ok=false` API-level errors), sendMessage transient retry/backoff (`429`/`5xx`/network), allowlist normalization (`@user` + whitespace-safe), topic/thread-aware recipient routing (`chat_id:thread_id`), URL+local attachment marker dispatch (`[IMAGE:...]`, `[DOCUMENT:...]`, `[VIDEO:...]`, `[AUDIO:...]`, `[VOICE:...]`), invalid attachment marker text preservation, short-text caption routing to first supported attachment (with long-text chunked fallback to avoid loss), caption MarkdownV2 fallback-to-plain on `400` for both single-media and media-group first-caption paths, `sendMediaGroup` batching (URL + local multipart `attach://`) with 10-item split/unsupported-type segmentation, bounded transient retry/backoff, and sequential fallback after retries are exhausted, getUpdates 401/403/409/429 handling, and HTTP timeout defaults are implemented; richer markdown rendering heuristics remain in progress.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **Scheduled Tasks Parity**        | In Progress | `omni-agent schedule` implemented (interval, max-runs, graceful completion drain) with integration tests.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **Identity/Persona Baseline**     | Todo        | Add persistent persona/identity behavior comparable to ZeroClaw OpenClaw identity layer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |

### Recent Hardening Updates (2026-02-20)

- Telegram group session isolation policy now supports layered overrides (`group_policy`, `group_allow_from`, `require_mention`, per-group `groups`, and per-topic `groups.<chat_id>.topics.<thread_id>`) with explicit precedence and dedicated regression coverage in `channels_telegram_group_policy`.
- Runtime settings merge now deep-merges Telegram `groups/topics` across system defaults and user overrides, with dedicated merge tests in `config_settings`.
- Telegram command authorization now supports recipient-scoped delegated admins via `groups.<chat_id>.admin_users` and `groups.<chat_id>.topics.<thread_id>.admin_users`, while preserving global explicit ACL precedence.
- Telegram runtime now supports chat-managed delegated admin overrides through `/session admin [list|set|add|remove|clear] [json]` (plus `/window|/context admin` aliases), backed by recipient-scoped channel mutation APIs and regression coverage in parser/runtime/group-policy tests.
- Telegram session isolation tests now additionally cover `chat` partition cross-group isolation (same user, different groups must not share snapshots/session keys) in both webhook and runtime test layers.
- Telegram session isolation regressions now also cover `chat_thread_user` partition behavior (same group + same user + different topic/thread must remain isolated) and runtime delegated-admin topic/group scope separation.
- Telegram slash ACL tests now additionally cover scope isolation (granting `session.memory` does not implicitly grant `session.budget`) and verify that normal non-slash turns are not blocked by slash ACL checks.
- CI now has a dedicated PR gate job (`telegram-session-isolation-gate`) that runs targeted Telegram isolation + slash-ACL Rust regressions plus deterministic Python harness regressions (`test_agent_channel_command_events.py`, `test_agent_channel_session_matrix.py`) in `checks.yaml`.
- Telegram outbound transport now applies a channel-level shared `retry_after` gate across concurrent sends (`sendMessage`, media upload, and media-group multipart paths), with staggered post-gate release to reduce burst spikes; Valkey-backed distributed synchronization (`OMNI_AGENT_TELEGRAM_SEND_RATE_LIMIT_GATE_VALKEY_URL` or `VALKEY_URL`) extends the same gate across instances for multi-node deployments. Regression coverage (`telegram_send_global_rate_limit_gate_delays_parallel_send`, `telegram_send_global_rate_limit_gate_spreads_parallel_followup_requests`, `telegram_send_rate_limit_valkey_constructor_rejects_invalid_url`) is included in CI gate checks, with an ignored live Valkey cross-instance scenario in `channels_telegram_send_gate`.
- Command-event matrix harness now emits structured JSON/Markdown reports and supports optional `--assert-admin-isolation` checks that enforce cross-group delegated-admin separation via `json_override_admin_count`.
- Command-event matrix harness now also supports same-group cross-topic delegated-admin isolation checks via `--assert-admin-topic-isolation` (`--group-thread-id`, optional `--group-thread-id-b`) with dedicated script-level regression coverage.
- Acceptance runner now automatically runs a thread-aware `command_events_topic_isolation` stage and a thread-aware session matrix (`--thread-a/--thread-b`) when `OMNI_TEST_GROUP_THREAD_ID` (or CLI thread args) is configured.
- Command-event hardening now treats dedup race exits as transient in admin matrix retries (`exit=4`) and black-box duplicate signals only fail when target dispatch is not observed, reducing false negatives under shared-runtime concurrency.

---

### Rust Runtime Unification (Omega + Graph + Loop/ReAct)

Converge orchestration to a single Rust runtime (`omni-agent`) while keeping Python as MCP tool provider during migration.

| Task                                                  | Status      | Description                                                                                                                                                        |
| ----------------------------------------------------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Unified Rust Execution Kernel**                     | In Progress | Rust-only CLI dispatch (`omni run`, `omni gateway`, `omni agent`) and removal of Python runtime loop entrypoints on hot path are in active consolidation.          |
| **Graph Planning Engine (Rust)**                      | Todo        | Move graph planning contracts and execution into Rust runtime with stable schema outputs.                                                                          |
| **Omega Deliberation Engine (Rust)**                  | Todo        | Move quality gates and plan-repair logic into Rust runtime.                                                                                                        |
| **Xiuxian-Qianhuan Injection Engine (Rust)**          | Todo        | Introduce typed prompt context blocks, policy-driven atomic assembly, and deterministic injection contracts in Rust runtime.                                       |
| **Discover Confidence Contract (Rust-first)**         | In Progress | Preserve `score/final_score/confidence/ranking_reason` end-to-end for `skill.discover` and route governance; add clarification/fallback policy by confidence tier. |
| **Data Plane Standardization (Valkey+LanceDB+Arrow)** | In Progress | Enforce hot/durable/contract split: Valkey for hot state and cache, LanceDB for durable retrieval and replay, Arrow for canonical inter-stage schema.              |
| **Role-Mix Injection Profiles**                       | Todo        | Add Omega-selected mixed-role prompt profiles and mode switching (`single`/`classified`/`hybrid`) with deterministic assembly and observability.                   |
| **Memory Domain Separation (Core + Facade)**          | In Progress | Rust memory core owns lifecycle/revalidation/promotion policy; memory skill remains MCP facade; knowledge skill remains long-term durable knowledge interface.     |
| **ReAct Tool Runtime (Rust)**                         | In Progress | Continue consolidating retries, budgets, tool-call error handling, and observability under Rust execution path.                                                    |
| **Session Window Compression (Rust)**                 | In Progress | Complete `omni-window` strategy rollout (thresholds, snapshot/restore predictability, config surface).                                                             |
| **Memory Self-Evolution Runtime (Rust)**              | In Progress | Continue DB-backed memory adaptation and feedback learning under Rust session isolation.                                                                           |
| **Xiuxian-Qianhuan Rollout Gates (A0-A7)**            | Todo        | Execute contract freeze, injection/route/gate implementation, isolation matrix, and SLO sign-off in strict gate order.                                             |
| **Python Runtime Decommissioning**                    | Todo        | Keep Python as MCP tool service only; remove duplicated runtime loops once parity gates pass.                                                                      |
| **Blueprint Document**                                | Done        | [Omega + Graph + Loop/ReAct Rust Unification](plans/omega-graph-react-rust-unification.md)                                                                         |
| **Rollout Plan Document**                             | Done        | [Xiuxian-Qianhuan Implementation Rollout Plan](plans/xiuxian-qianhuan-implementation-rollout.md)                                                                   |

---

## Low Priority

### Developer Experience

Improvements that make development easier but aren't blocking core functionality.

| Task                    | Status | Description                                                          |
| ----------------------- | ------ | -------------------------------------------------------------------- |
| **Tutorial: New Skill** | Done   | Covered by **skill generator**: `omni skill generate` (Jinja2 + LLM) |

---

### Agent TUI / Visual Thinking Pipeline _(deferred)_

Interactive TUI to visualize the Trinity Architecture; not in scope for now.

| Task                      | Status   | Description                                                  |
| ------------------------- | -------- | ------------------------------------------------------------ |
| **Event Bus System**      | Deferred | Create EventBus for publishing Trinity phase events          |
| **Textual TUI App**       | Deferred | Build Textual-based TUI with thinking pipeline visualization |
| **LangGraph Integration** | Deferred | Connect LangGraph node transitions to event stream           |
| **CLI Integration**       | Deferred | Add `--tui` mode to `omni run` command                       |
| **Interactive Features**  | Deferred | F1 Help, F2 History, F3 Stats, pause/resume, Ctrl+C to abort |

---

## Completed

| Feature                             | Date       | Notes                                                                                                                                                |
| ----------------------------------- | ---------- | ---------------------------------------------------------------------------------------------------------------------------------------------------- |
| **TikToken Integration**            | 2026-02-04 | Rust-only omni-tokenizer + PyO3, no Python fallback                                                                                                  |
| **Enhanced Test-Kit**               | 2026-02-04 | Layer markers, assertion helpers, demo tests                                                                                                         |
| **Testing Layer Strategy**          | 2026-02-04 | @unit, @integration, @cloud markers in omni.test_kit                                                                                                 |
| **Tool Schema Definition**          | 2026-02-04 | tool.schema.yaml in packages/shared/schemas/                                                                                                         |
| **Unified Response Format**         | 2026-02-04 | ToolResponse with status, data, error_code, metadata                                                                                                 |
| **Error Code System**               | 2026-02-04 | CoreErrorCode enum (1xxx-9xxx categories)                                                                                                            |
| **Provider Pattern**                | 2026-02-04 | VariantProvider, VariantRegistry in omni.core.skills                                                                                                 |
| **Robust Task Workflow**            | 2026-01-29 | Graph-based workflow with Reflection & Discovery Fixes                                                                                               |
| **Permission Gatekeeper**           | 2026-01-21 | Zero Trust security with Rust PermissionGatekeeper                                                                                                   |
| **Context Optimization**            | 2026-01-21 | ContextPruner + ContextManager for token diet                                                                                                        |
| **Skill Ecosystem Standardization** | 2026-01-20 | Template upgrades, writer cleanup, skill check --example                                                                                             |
| **Core Omni Refactoring**           | 2026-01-19 | LoopState, ActionGuard, AdaptivePlanner                                                                                                              |
| **Anti-Confusion Loop**             | 2026-01-19 | Prevents repeated file reads                                                                                                                         |
| **Adaptive Planning**               | 2026-01-18 | Dynamic step estimation                                                                                                                              |
| **NoteTaker Optimization**          | 2026-01-18 | Token reduction from 4000 to 500                                                                                                                     |
| **Rust agent (omni-agent)**         | 2026-02-18 | Gateway (HTTP/stdio/repl), memory in loop, session window, consolidation, rolling summary segments (Valkey + bounded store), Nanobot/ZeroClaw parity |
| **Rust agent CLI integration**      | 2026-02-16 | `omni agent --rust`, `omni gateway --rust` dispatch to omni-agent binary                                                                             |

---

## Architecture Improvements (Feb 2026)

| Feature                          | Status | Description                                         |
| -------------------------------- | ------ | --------------------------------------------------- |
| **Provider Pattern**             | `Done` | VariantProvider, VariantRegistry for skill variants |
| **Tool Schema Definition**       | `Done` | tool.schema.yaml in packages/shared/schemas/        |
| **Testing Layer Strategy**       | `Done` | @unit, @integration, @cloud markers                 |
| **Unified Response Format**      | `Done` | ToolResponse with ResponseStatus enum               |
| **Error Code System**            | `Done` | CoreErrorCode with 1xxx-9xxx categories             |
| **Enhanced Test-Kit**            | `Done` | assert helpers, layer markers, fixtures             |
| **Shared Type Definition**       | `Done` | Pydantic types in core module                       |
| **Knowledge System Enhancement** | `Done` | xiuxian-wendao Rust crate + PyO3 bindings           |

**Related Files:**

- `packages/python/core/src/omni/core/responses.py`
- `packages/python/core/src/omni/core/errors.py`
- `packages/python/core/src/omni/core/skills/variants.py`
- `packages/python/core/src/omni/core/testing/layers.py`
- `packages/python/test-kit/src/omni/test_kit/asserts.py`
- `packages/python/core/src/omni/core/shared/skill_metadata_schema.py`
- `packages/python/core/src/omni/core/shared/tool_schema.py`

**Knowledge System Files:**

- `packages/rust/crates/xiuxian-wendao/src/lib.rs`
- `packages/rust/crates/xiuxian-wendao/src/types.rs`
- `packages/rust/crates/xiuxian-wendao/src/storage.rs`
- `packages/rust/crates/xiuxian-wendao/tests/test_knowledge.rs`
- `packages/python/core/src/omni/core/knowledge/types.py`
- `packages/python/core/tests/units/knowledge/test_librarian.py`
