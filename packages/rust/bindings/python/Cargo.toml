[package]
name = "omni-core-rs"
version.workspace = true
edition.workspace = true

[lints]
workspace = true

[lib]
name = "omni_core_rs"
crate-type = ["cdylib"]

[features]
default = ["assembler", "notify"]
assembler = ["omni-io/assembler"]
notify = ["omni-io/notify"]

[dependencies]
# Python 3.13 support via PyO3 0.23
pyo3 = { workspace = true, features = ["extension-module"] }
# Note: tokio removed - not needed for synchronous bindings
omni-events = { path = "../../crates/omni-events" }
omni-sniffer = { path = "../../crates/omni-sniffer" }
omni-types = { path = "../../crates/omni-types" }
omni-io = { path = "../../crates/omni-io", default-features = false }
omni-tokenizer = { path = "../../crates/omni-tokenizer" }
# Hyper-Immune System
omni-ast = { path = "../../crates/omni-ast" }
omni-security = { path = "../../crates/omni-security" }
# The Cartographer
omni-tags = { path = "../../crates/omni-tags" }
# The Surgeon - Structural Refactoring
omni-edit = { path = "../../crates/omni-edit" }
# The Librarian - Vector Store for embeddings
omni-vector = { path = "../../crates/omni-vector" }
# Skills Scanner - Skill metadata and tool discovery
skills-scanner = { path = "../../crates/skills-scanner" }
serde = { workspace = true }
serde_json = { workspace = true }
anyhow = { workspace = true }
tokio = { workspace = true, features = ["rt-multi-thread", "macros", "io-util", "fs"] }
uuid = { workspace = true }

[dev-dependencies]
pyo3 = { workspace = true }
tempfile = "3"
