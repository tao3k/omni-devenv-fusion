[package]
name = "omni-core-rs"
version.workspace = true
edition.workspace = true

[lints]
workspace = true

[lib]
name = "omni_core_rs"
crate-type = ["cdylib"]

[features]
default = ["assembler", "notify"]
assembler = ["omni-io/assembler"]
notify = ["omni-io/notify"]

[dependencies]
# Python 3.13 support via PyO3 0.23
pyo3 = { workspace = true, features = ["extension-module"] }

# Parallel processing for batch file operations
rayon = { workspace = true }

# Internal crates
omni-events = { path = "../../crates/omni-events" }
omni-sniffer = { path = "../../crates/omni-sniffer" }
omni-types = { path = "../../crates/omni-types" }
omni-io = { path = "../../crates/omni-io", default-features = false }
omni-tokenizer = { path = "../../crates/omni-tokenizer" }
omni-ast = { path = "../../crates/omni-ast" }
omni-security = { path = "../../crates/omni-security" }
omni-tags = { path = "../../crates/omni-tags" }
omni-edit = { path = "../../crates/omni-edit" }
omni-vector = { path = "../../crates/omni-vector" }
omni-scanner = { path = "../../crates/omni-scanner" }
omni-executor = { path = "../../crates/omni-executor" }
omni-tui = { path = "../../crates/omni-tui" }
xiuxian-wendao = { path = "../../crates/xiuxian-wendao" }
omni-sandbox = { path = "../../crates/omni-sandbox" }
omni-memory = { path = "../../crates/omni-memory", features = ["pybindings"] }
omni-window = { path = "../../crates/omni-window", features = ["pybindings"] }

# Arrow IPC: analytics TableHealthReport → RecordBatch → bytes for Python pyarrow
arrow = { workspace = true }
arrow-ipc = { workspace = true }

# Workspace dependencies (inherited)
serde = { workspace = true }
serde_json = { workspace = true }
jsonschema = { workspace = true }
anyhow = { workspace = true }
tokio = { workspace = true, features = ["rt-multi-thread", "macros", "io-util", "fs"] }
uuid = { workspace = true }
chrono = { workspace = true }
sha2 = "0.10"
hex = "0.4"
which = "6.0"

[dev-dependencies]
tempfile = { workspace = true }
