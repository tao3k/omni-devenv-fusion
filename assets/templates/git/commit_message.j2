{#
# git/commit_message.j2 - Commit Message Template
#
# Renders commit message as Markdown with XML tags for structured parsing.
#
# LLM Instructions:
# - This output combines Markdown (human-readable) with XML tags (machine-readable)
# - Parse <status>, <timestamp>, <security_guard> tags for metadata
# - Display commit message in Markdown format (# subject, body, ---)
# - Show security guard status and verification badge if present
#
# Example display:
#   üõ°Ô∏è Security Guard Detection - Passed
#
#   # feat(git): add new feature
#
#   Description here...
#
#   ---
#   ‚úÖ Verified by Omni Git Skill
#   - [x] lefthook passed
#   - [x] scope validated
#
#}

{%- if status %}
<git_commit_context>
    <status>{{ status }}</status>
    <timestamp>{{ timestamp }}</timestamp>
{% endif -%}

{%- if security_warning %}
<security_guard>
    <passed>{{ 'true' if security_passed else 'false' }}</passed>
    <message>{{ security_warning }}</message>
</security_guard>
{%- endif %}

{% if subject -%}
</commit_message>
# {{ subject }}
{% else %}
</commit_message>
# No subject provided
{%- endif %}

{%- if body %}
{{ body }}
{%- endif %}

---
{% if verified %}
<verification_badge>
    <tool>Omni Git Skill</tool>
    <status>Verified</status>
{% if checks %}
    <checks>
{% for check in checks -%}
        - [x] {{ check }}
{% endfor -%}
    </checks>
{% endif %}
    <signature>‚ú® Verified by Omni Git Skill (cog) ‚ú®</signature>
</verification_badge>
{% endif %}
