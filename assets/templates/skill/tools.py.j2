"""
{{ skill_name }}/tools.py - {{ skill_name }} Skill Router (Phase 35.2)

This is the ROUTER layer - it only dispatches to implementation scripts.
All actual logic is in the scripts/ directory.

Architecture (Isolated Sandbox + Explicit Routing):
    tools.py    -> Router (just dispatches, validates params)
    scripts/    -> Controllers (actual implementation)
                -> Fully isolated namespace (no conflicts with other skills)

Usage:
    from agent.skills.{{ module_name }}.scripts import example

Note: We use absolute imports to work with ModuleLoader's package setup.
The scripts module is loaded as agent.skills.{{ module_name }}.scripts.xxx
"""

from agent.skills.decorators import skill_command


# =============================================================================
# READ Operations (Router Layer)
# =============================================================================


@skill_command(
    name="example",
    category="read",
    description="An example command for the {{ skill_name }} skill.",
)
def example(param: str = "default") -> str:
    """
    An example command for the {{ skill_name }} skill.

    Args:
        param: Description of the parameter

    Returns:
        Description of the return value
    """
    from agent.skills.{{ module_name }}.scripts import example as example_mod
    return example_mod.example_command(param)


# =============================================================================
# VIEW Operations (Router Layer)
# =============================================================================


@skill_command(
    name="help",
    category="view",
    description="Show full skill context and guidelines.",
)
def help() -> str:
    """
    Show full skill context and guidelines.
    """
    from common.skills_path import SKILLS_DIR
    from repomix import repomix

    skill_dir = SKILLS_DIR(skill="{{ skill_name }}")
    output = repomix(skill_dir, style="xml", include=["SKILL.md", "tools.py", "README.md"])
    return output
