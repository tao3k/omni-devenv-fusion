# agent/settings.yaml
# Project Settings - Configuration File Paths
#
# This file centralizes paths to configuration files.
# Use --conf flag to override the configuration directory (default: ./agent)
#
# Usage:
#   python script.py --conf ./agent
#
#   from common.mcp_core.settings import get_setting
#   cog_path = get_setting("config.cog_toml")
#
# Note: Actual commit types/scopes are read from cog.toml/.conform.yaml,
# not from this file. This file only defines the paths to those files.

# =============================================================================
# Configuration Directory
# =============================================================================
# Root directory for all agent-related configurations
# Override with: --conf /path/to/conf

conf_dir: "agent"

# =============================================================================
# Configuration Files
# =============================================================================
config:
  # Commit message validation configuration files
  cog_toml: "cog.toml"
  conform_yaml: ".conform.yaml"

  # Project root marker
  project_marker: ".git"

# =============================================================================
# API Key Configuration
# =============================================================================
# API key files - paths relative to project root (git toplevel)
api:
  # Anthropic API key configuration file
  anthropic_settings: ".claude/settings.json"

# =============================================================================
# MCP Configuration
# =============================================================================
# MCP configuration files
mcp:
  # Main MCP configuration file
  config_file: ".mcp.json"

  # Server names
  orchestrator: "orchestrator"
  coder: "coder"
  executor: "executor"

  # Default timeout (seconds)
  timeout: 120

# =============================================================================
# Git Commit Settings
# =============================================================================
# Note: Actual types and scopes are loaded from cog.toml/.conform.yaml
# These are fallback values only when config files don't exist

commit:
  # Default protocol: "stop_and_ask" or "auto_commit"
  protocol: "stop_and_ask"

# =============================================================================
# Logging Settings
# =============================================================================
logging:
  format: "json"
  level: "info"

# =============================================================================
# Phase 13.8: Configuration-Driven Context
# =============================================================================
prompts:
  core_path: "agent/prompts/system_core.md"
  user_custom_path: ".cache/user_custom.md"

# =============================================================================
# Memory Configuration (Phase 13.10: Hippocampus)
# =============================================================================
# Memory path follows prj-spec: {git_toplevel}/.cache/{project}/.memory/
# Override with custom path if needed
memory:
  # Custom memory path (leave empty to use default prj-spec)
  # path: "/custom/path/.memory"
  path: ""

# =============================================================================
# Phase 13.10: Dynamic Skill Loading
# =============================================================================
skills:
  # Skills to preload at server startup (loaded into context immediately)
  preload:
    - knowledge # Project Cortex - Load FIRST
    - memory # Hippocampus - Vector memory
    - git
    - filesystem
    - writer
    - terminal
    - testing_protocol
    - code_insight

  # Reload behavior
  reload:
    # Allow LLM to reload skills via load_skill
    enabled: true
    # Default to false - require explicit confirmation
    auto_confirm: false

# =============================================================================
# Phase 19.7: Claude Code Symbiosis - Context Compression
# =============================================================================
# Settings for Dynamic Context Compression when injecting context to Claude Code
# Prevents context bloat by summarizing large RAG results

context_compression:
  # Enable/disable context compression globally
  enabled: true

  # Maximum context tokens before compression is triggered
  # Claude 3.5 Sonnet has ~200K context window, but we compress to save tokens
  max_context_tokens: 4000

  # Maximum file size (KB) before compression is triggered
  # Files larger than this will be summarized instead of fully included
  max_file_size_kb: 50

  # Compression method: "llm" (use LLM to summarize) or "truncate" (simple cut)
  method: "llm"

# =============================================================================
# Phase 19.7: Claude Code Symbiosis - Post-Mortem Audit
# =============================================================================
# Settings for automatic review after Claude Code execution

post_mortem:
  # Enable/disable Post-Mortem audit after Claude Code execution
  enabled: true

  # Confidence threshold: audits below this are flagged for manual review
  confidence_threshold: 0.8
